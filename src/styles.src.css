@import 'tailwindcss';

/* ========================================
   SUPPORT & UI SECTIONS
   ======================================== */

/* Support section */
.support-header-margin {
    @apply mb-5;
}

/* ========================================
   PERIODIC NOTES VIEW
   ======================================== */

.periodic-notes-view {
    @apply flex flex-col gap-4 p-4;
}

/* Period Tabs */
.pn-tabs {
    @apply flex gap-2 mb-4;
}

.pn-tab {
    @apply px-3 py-1.5 rounded cursor-pointer transition-all duration-150;
    background-color: var(--background-secondary);
    color: var(--text-muted);
}

.pn-tab:hover {
    background-color: var(--background-modifier-hover);
}

.pn-tab--active {
    @apply cursor-default font-semibold;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.pn-tab--active:hover {
    background-color: var(--interactive-accent);
}

/* Note Cards */
.pn-cards {
    @apply flex flex-col gap-3;
}

.pn-card {
    @apply rounded border overflow-hidden;
    background-color: var(--background-primary);
    border-color: var(--background-modifier-border);
}

.pn-card__header {
    @apply flex items-center justify-between px-4 py-3 cursor-pointer;
    background-color: var(--background-secondary);
}

.pn-card__header:hover {
    background-color: var(--background-modifier-hover);
}

.pn-card__title {
    @apply font-medium flex-1;
    color: var(--text-normal);
}

.pn-card__title--missing {
    color: var(--text-muted);
}

.pn-card__actions {
    @apply flex items-center gap-2 mr-2;
}

.pn-card__action-btn {
    @apply p-1 rounded;
}

/* Mode toggle buttons */
.pn-card__mode-toggle {
    @apply flex items-center gap-0.5 p-0.5 rounded;
    background-color: var(--background-modifier-hover);
}

.pn-card__mode-btn {
    @apply p-1 rounded transition-all duration-150;
    color: var(--text-muted);
}

.pn-card__mode-btn:hover {
    color: var(--text-normal);
    background-color: var(--background-modifier-hover);
}

.pn-card__mode-btn--active {
    color: var(--text-on-accent);
    background-color: var(--interactive-accent);
}

.pn-card__mode-btn--active:hover {
    background-color: var(--interactive-accent-hover);
}

/* Embedded editor container */
.pn-card__editor {
    @apply min-h-[100px];
}

.pn-card__editor .cm-editor {
    background-color: transparent;
}

.pn-card__editor .cm-scroller {
    @apply overflow-auto;
}

.pn-card__editor .cm-content {
    @apply py-0;
}

.pn-card__toggle {
    @apply transition-transform duration-200;
}

.pn-card--expanded .pn-card__toggle {
    @apply rotate-180;
}

.pn-card__content {
    @apply hidden px-4 py-3;
}

.pn-card--expanded .pn-card__content {
    @apply block;
}

.pn-card--missing {
    @apply opacity-70;
    border-style: dashed;
}

.pn-card--current {
    border-color: var(--interactive-accent);
    border-width: 2px;
}

/* Current period dot indicator in card title */
.pn-card--current .pn-card__title {
    @apply flex items-center gap-1.5;
}

.pn-card--current .pn-card__title::before {
    content: '●';
    @apply text-[0.5rem] leading-none;
    color: var(--interactive-accent);
}

.pn-card--current.pn-card--missing {
    @apply opacity-100;
}

.pn-card__header--missing {
    @apply justify-between;
}

.pn-card__error {
    @apply py-2 text-sm;
    color: var(--text-error);
}

/* Create Button */
.pn-create-btn {
    @apply flex items-center gap-2 px-3 py-1.5 rounded cursor-pointer;
    @apply transition-all duration-150 text-sm font-medium;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.pn-create-btn:hover {
    @apply opacity-90;
}

.pn-create-btn--loading {
    @apply cursor-not-allowed opacity-70;
}

.pn-create-btn--loading:hover {
    @apply opacity-70;
}

.pn-create-btn__icon {
    @apply flex items-center justify-center;
}

/* Spinner animation */
.pn-spinner {
    animation: pn-spin 1s linear infinite;
}

@keyframes pn-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Large Create Button (for periodic review view) */
.pn-create-large {
    @apply flex items-center justify-center w-full h-full;
}

.pn-create-large__btn {
    @apply flex items-center gap-3 px-6 py-3 rounded-lg cursor-pointer;
    @apply transition-all duration-150 text-base font-medium;
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.pn-create-large__btn:hover {
    @apply opacity-90;
}

.pn-create-large__btn--loading {
    @apply cursor-not-allowed opacity-70;
}

.pn-create-large__btn--loading:hover {
    @apply opacity-70;
}

.pn-create-large__icon {
    @apply flex items-center justify-center;
}

.pn-create-large__text {
    @apply font-medium;
}

/* Missing Card (placeholder for missing notes) */
.pn-missing-card {
    @apply rounded border px-4 py-3 flex items-center justify-between;
    border-style: dashed;
    background-color: var(--background-secondary-alt, var(--background-secondary));
    border-color: var(--background-modifier-border);
}

.pn-missing-card__label {
    @apply text-sm italic;
    color: var(--text-muted);
}

/* Empty State */
.pn-empty-state {
    @apply flex flex-col items-center justify-center py-12 gap-4;
    color: var(--text-muted);
}

.pn-empty-state__icon {
    @apply opacity-50;
}

.pn-empty-state__text {
    @apply text-center max-w-md;
}

/* ========================================
   PERIODIC REVIEW VIEW (Sliding Panes Style)
   ======================================== */

.periodic-review-view {
    @apply h-full overflow-x-auto overflow-y-hidden;
}

.pr-columns {
    @apply flex h-full;
}

.pr-column {
    @apply flex flex-col h-full border-r relative shrink-0 grow-0 transition-all duration-200 min-w-[350px] max-w-[450px];
    border-color: var(--background-modifier-border);
}

.pr-column.pr-column--folded {
    @apply overflow-hidden shrink-0 grow-0 min-w-[48px] w-[48px] max-w-[48px] cursor-pointer;
    flex-basis: 48px;
}

/* Column header */
.pr-column__header {
    @apply flex items-center gap-2 px-3 py-2 cursor-pointer;
    background-color: var(--background-secondary);
}

.pr-column__header:hover {
    background-color: var(--background-modifier-hover);
}

/* Folded header - vertical layout */
.pr-column--folded .pr-column__header {
    @apply absolute inset-0 flex-col items-center pt-3 px-0;
}

.pr-column__title {
    @apply font-medium text-sm;
    color: var(--text-normal);
}

/* Folded title - rotated 90° left (counter-clockwise) */
.pr-column--folded .pr-column__title {
    writing-mode: vertical-rl;
    @apply mt-2 whitespace-nowrap;
}

.pr-column__fold-btn {
    @apply p-1 rounded cursor-pointer;
}

.pr-column__fold-btn:hover {
    background-color: var(--background-modifier-hover);
}

.pr-column--folded .pr-column__fold-btn {
    @apply mb-0;
}

/* Header actions container (right side) */
.pr-column__header-actions {
    @apply flex items-center gap-1 ml-auto;
}

.pr-column--folded .pr-column__header-actions {
    @apply hidden;
}

.pr-column__create-btn {
    @apply p-1 rounded cursor-pointer;
    color: var(--text-muted);
}

.pr-column__create-btn:hover {
    background-color: var(--background-modifier-hover);
    color: var(--text-normal);
}

.pr-column__create-btn--loading {
    @apply cursor-not-allowed opacity-50;
}

.pr-column__selector {
    @apply flex-shrink-0 overflow-y-auto max-h-[180px] border-b;
    border-color: var(--background-modifier-border);
}

.pr-column--folded .pr-column__selector {
    @apply hidden;
}

.pr-column__content {
    @apply flex-1 overflow-y-auto p-3;
}

.pr-column--folded .pr-column__content {
    @apply hidden;
}

/* Period selector items */
.pr-period-item {
    @apply px-3 py-2 cursor-pointer text-sm;
    color: var(--text-muted);
}

.pr-period-item:hover {
    background-color: var(--background-modifier-hover);
}

.pr-period-item--selected {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.pr-period-item--missing {
    @apply opacity-60 italic;
}

.pr-period-item--future {
    @apply italic opacity-70;
    border-left: 2px solid var(--text-accent);
    padding-left: 0.5rem;
}

/* Current period indicator - uses border + dot icon */
.pr-period-item--current {
    @apply relative font-medium;
    border-left: 3px solid var(--interactive-accent);
    padding-left: calc(0.75rem - 1px);
}

.pr-period-item--current::before {
    content: '●';
    @apply absolute text-[0.5rem] leading-none;
    left: 0.25rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--interactive-accent);
}

/* When current is also selected, keep the dot visible but adjust color */
.pr-period-item--current.pr-period-item--selected {
    border-left-color: var(--text-on-accent);
}

.pr-period-item--current.pr-period-item--selected::before {
    color: var(--text-on-accent);
}

/* Message when parent period doesn't exist */
.pr-parent-missing {
    @apply flex items-center justify-center p-4 text-center;
    color: var(--text-muted);
}

.pr-parent-missing__text {
    @apply text-sm italic max-w-xs leading-relaxed;
}

/* Section styling */
.pr-section {
    @apply mb-4 pb-4 border-b;
    border-color: var(--background-modifier-border);
}

.pr-section:last-child {
    @apply border-b-0;
}

.pr-section__header {
    @apply flex items-center justify-between mb-2;
}

.pr-section__title {
    @apply font-medium;
    color: var(--text-normal);
}

.pr-copy-btn {
    @apply text-xs px-2 py-1 rounded cursor-pointer;
    background-color: var(--background-modifier-hover);
    color: var(--text-muted);
}

.pr-copy-btn:hover {
    background-color: var(--interactive-accent);
    color: var(--text-on-accent);
}

.pr-section__content {
    @apply text-sm;
}

/* Review view empty state */
.pr-empty-state {
    @apply flex flex-col items-center justify-center h-full gap-4 p-8;
    color: var(--text-muted);
}

.pr-empty-state__icon {
    @apply opacity-50;
}

.pr-empty-state__text {
    @apply text-center max-w-md text-sm;
}

/* Create note placeholder in review view */
.pr-create-note {
    @apply flex items-center justify-center h-full p-4;
}

/* Content wrapper for markdown rendering */
.pr-markdown-content {
    @apply text-sm;
}

.pr-markdown-content h1,
.pr-markdown-content h2,
.pr-markdown-content h3,
.pr-markdown-content h4,
.pr-markdown-content h5,
.pr-markdown-content h6 {
    @apply mt-3 mb-2;
}

.pr-markdown-content h1:first-child,
.pr-markdown-content h2:first-child,
.pr-markdown-content h3:first-child {
    @apply mt-0;
}
